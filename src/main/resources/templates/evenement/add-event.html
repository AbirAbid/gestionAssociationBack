<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:insert="fragment/header :: headerfiles">

<body>
<div th:replace="fragment/menu ::menugauche">


</div>
<div id="content">

    <div th:replace="fragment/header ::navbar"></div>

    <div class="container">

        <div class="card border-primary mb-3" style="max-width: 50rem; ">

            <h5 class="card-header info-color white-text text-center py-2">
                <strong> CRÉER UN ÉVÈNEMENT
                </strong>
            </h5>

            <!--Card content-->
            <div class="card-body px-lg-5">
                <div class="container mt-3">
                    <div class="stepwizard ">
                        <div class="stepwizard-row setup-panel">
                            <div class="stepwizard-step">
                                <a href="#step-1" type="button" class="btn btn-secondary btn-circle">1</a>
                                <p>Information événement</p>
                            </div>
                            <div class="stepwizard-step">
                                <a href="#step-2" type="button" class="btn btn-default btn-circle"
                                >2</a>
                                <p>Besoin des biens</p>
                            </div>
                            <div class="stepwizard-step">
                                <a href="#step-3" type="button" class="btn btn-default btn-circle"
                                >3</a>
                                <p>Besoin des bénévoles</p>
                            </div>
                        </div>
                    </div>
                    <form action="#"
                          th:action="@{/evenement/save}"
                          th:object="${evenementDto}"
                          method="post">
                        <div class="setup-content" id="step-1">
                            <div class="col-xs-6 col-md-offset-3">
                                <div class="col-md-12">
                                    <h3> Information événement</h3>

                                    <div class="md-form">
                                        <label>Titre</label>
                                        <input type="text" th:field="*{titre}" class="form-control"
                                        />
                                        <p th:errors="*{titre}" class="text-danger"></p>


                                    </div>
                                    <div class="md-form">
                                        <label>Ville</label>
                                        <input
                                                type="text" th:field="*{ville}" class="form-control" placeholder="Ville"
                                        >
                                        <p th:errors="*{ville}" class="text-danger"></p>

                                    </div>
                                    <div class="md-form">
                                        <label>Adresse</label>
                                        <input
                                                type="text" th:field="*{adresse}" class="form-control"
                                                placeholder="Adresse"
                                        >
                                        <p th:errors="*{adresse}" class="text-danger"></p>

                                    </div>
                                    <div class="md-form">
                                        <label>Déscription</label>
                                        <textarea th:field="*{description}" class="form-control">
                                        </textarea>
                                        <p th:errors="*{description}" class="text-danger"></p>

                                    </div>
                                    <div class="md-form">

                                        <p th:text="${errorDate}" class="text-danger"></p>

                                    </div>
                                    <div class="md-form">
                                        <label>Date Début</label>
                                        <!-- <input type="datetime-local" class="form-control" name="dateDebut"
                                                th:name="dateDebut"/>-->
                                        <input type="date" class="form-control" name="dateDebut"
                                               th:field="*{dateDebut}" th:value="${dateDebut}"/>
                                        <p th:errors="*{dateDebut}" class="text-danger"></p>

                                    </div>
                                    <div class="md-form">
                                        <label>Date Fin</label>
                                        <!--<input type="datetime-local" class="form-control" name="dateFin"
                                               th:name="dateFin"/>-->
                                        <input type="date" class="form-control" name="dateFin"
                                               th:field="*{dateFin}" th:value="${dateFin}"/>
                                        <p th:errors="*{dateFin}" class="text-danger"></p>

                                    </div>
                                    <br>
                                    <div class="md-form">
                                        <label>Nos partenaires</label>
                                        <div class="selectRow">
                                            <select class="form-control"
                                                    id="multipleSelectExample" multiple="multiple"
                                                    th:field="*{sponsors}"
                                            >
                                                <option th:each="sponsor : ${sponsors}"
                                                        th:text="${sponsor.titreSponsor}" th:value="${{sponsor}}"
                                                ></option>

                                            </select>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="md-form">
                                        <div class="row">
                                            <div class="col-sm-4">
                                                <div class="custom-control custom-switch">
                                                    <input type="checkbox" class="custom-control-input"
                                                           id="customSwitch1"
                                                           checked data-toggle="collapse"
                                                           data-target='#collapsediv1'>

                                                    <label class="custom-control-label" for="customSwitch1">Frais
                                                        d'inscription </label>
                                                </div>
                                            </div>

                                            <div class="collapse" id="collapsediv1">
                                                <div class="row">
                                                    <div class="  col-sm-4">

                                                        <input type="number" class="form-control" name="frais"
                                                               th:field="*{frais}">

                                                    </div>
                                                    <div class=" col-sm-4"><strong>Dt</strong>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                    <br>
                                    <button type="button" class="btn btn-secondary nextBtn  float-right "> Continuer
                                        et ajouter des biens
                                        <i class="fas fa-arrow-right"></i></button>


                                </div>
                            </div>
                        </div>

                        <div class=" setup-content" id="step-2">


                            <!--
                                                    <div id="bookList">
                            <div class="row">
                                <div class="col form-group d-none">id</div>
                                <div class="col form-group">title</div>
                                <div class="col form-group">author</div>
                            </div>
                            <div class="row item" th:each="book, itemStat : *{books}">
                                <div class="col form-group d-none">
                                    <input th:placeholder="Title + ' ' + ${itemStat.count}"
                                           th:field="*{books[__${itemStat.index}__].title}"/>
                                </div>
                                <div class="col form-group">
                                    <input th:placeholder="Author + ' ' + ${itemStat.count}"
                                           th:field="*{books[__${itemStat.index}__].author}"
                                    />
                                    <input type="reset" id="resetButton" class="btn btn-danger" th:value="Reset"/>

                                </div>

                            </div>
                        </div>
-->
                            <div class="row">
                                <div class="col-sm-6">
                                    <h3> Besoin des biens</h3>
                                </div>
                                <div class="col-sm-6">
                                    <button type="button" class="btn btn-secondary   float-right "
                                            title="Ajouter un bien"
                                            onclick="addRowBien()"><i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <br>

                            <!--
                                                        <div th:each="bien, itemStat : *{biens}">


                                                            <label>Titre</label>


                                                            <input type="text" class="form-control"
                                                                   th:placeholder="
                                                                   Bien + ' ' + ${itemStat.count}"
                                                                   th:field="*{biens[__${itemStat.index}__].titreBien}"/>

                                                            <label>Quantité</label>

                                                            <input type="number" class="form-control"
                                                                   th:placeholder="qte + ' ' + ${itemStat.count}"
                                                                   th:field="*{biens[__${itemStat.index}__].qte}"/>
                                                            <br>
                                                        </div>
                            -->

                            <div class="row">
                                <div class="col">


                                    <div id="eventList">
                                        <div class="row">
                                            <div class="col form-group">Titre du bien</div>
                                            <div class="col form-group">Quantité</div>
                                        </div>
                                        <div class="row item" th:each="bien, itemStat : *{biens}">


                                            <div class="col form-group">
                                                <!-- th:placeholder="titreBien + ' ' + ${itemStat.count}"-->
                                                <input
                                                        x th:field="*{biens[__${itemStat.index}__].titreBien}"
                                                        type="text"
                                                        class="form-control">
                                            </div>

                                            <div class="col form-group">
                                                <!--th:placeholder="qte + ' ' + ${itemStat.count}"-->
                                                <input
                                                        th:field="*{biens[__${itemStat.index}__].qte}" type="number"
                                                        class="form-control">
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>


                            <!--
                                                        <div id="eventList">
                                                            <div th:each="bien, itemStat : *{biens}">


                                                                <label>Titre</label>


                                                                <input type="text" class="form-control"
                                                                       th:placeholder="titreBien + ' ' + ${itemStat.count}"
                                                                       th:field="*{biens[__${itemStat.index}__].titreBien}"/>

                                                                <label>Quantité</label>

                                                                <input type="number" class="form-control"
                                                                       th:placeholder="qte + ' ' + ${itemStat.count}"
                                                                       th:field="*{biens[__${itemStat.index}__].qte}"/>
                                                                <br>
                                                            </div>
                                                        </div>
                            -->

                            <br>
                            <button class="btn btn-secondary prevBtn  float-left " type="button" title="Retour"><i
                                    class="fas fa-arrow-left"></i>
                            </button>
                            <button class="btn btn-secondary nextBtn  float-right " type="button"
                                    title="Continuer et ajouter des missions bénévoles"><i
                                    class="fas fa-arrow-right"></i>
                            </button>

                        </div>
                        <div class=" setup-content" id="step-3">

                            <div class="row">
                                <div class="col-sm-6">
                                    <h3> Besoin des bénévoles </h3>
                                </div>
                                <div class="col-sm-6">
                                    <button type="button" class="btn btn-secondary   float-right "
                                            title="Ajouter une mission"
                                            onclick="addRowMission()"><i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">


                                    <div id="missionList">
                                        <div class="row">
                                            <div class="col form-group">Titre de la mission</div>
                                            <div class="col form-group">Déscription de la mission</div>
                                        </div>
                                        <div class="row item" th:each="missionBen, item : *{missionBenevoles}">


                                            <div class="col form-group">
                                                <input

                                                        th:field="*{missionBenevoles[__${item.index}__].titre}"
                                                        type="text"
                                                        class="form-control">
                                            </div>

                                            <div class="col form-group">
                                                <input
                                                        th:field="*{missionBenevoles[__${item.index}__].description}"
                                                        type="text"
                                                        class="form-control">
                                            </div>

                                        </div>


                                    </div>


                                </div>
                            </div>


                            <!--
                                                        <div th:each="missionBen, itemStat2 : *{missionBenevoles}">


                                                            <label>Titre de la mission</label>

                                                            <input type="text" class="form-control"
                                                                   th:placeholder="titre + ' ' + ${itemStat2.count}"
                                                                   th:field="*{missionBenevoles[__${itemStat2.index}__].titre}"/>

                                                            <label>Déscription de la mission </label>

                                                            <textarea class="form-control"
                                                                      th:placeholder="description + ' ' + ${itemStat2.count}"
                                                                      th:field="*{missionBenevoles[__${itemStat2.index}__].description}"></textarea>
                                                            <br>


                                                        </div>
                            -->

                            <button class="btn btn-secondary prevBtn  float-left " type="button"><i
                                    class="fas fa-arrow-left"></i> Retour
                            </button>
                            <button class="btn btn-secondary   float-right " type="submit">Enregistrer
                            </button>

                        </div>


                    </form>
                </div>
            </div>
        </div>


    </div>
</div>


</div>

</div>

</div>


<header th:insert="fragment/header.html ::scriptFooter"></header>
</body>
</html>
<script>

    let addRowBien = function () {
        let listNameB = 'biens'; //list name in Catalog.class
        let fieldsNamesB = ['titreBien', 'qte'];
        let rowIndexB = document.querySelectorAll('.item').length;

        let rowB = document.createElement('div');
        rowB.classList.add('row', 'item');


        fieldsNamesB.forEach((fieldName) => {
            let colB = document.createElement('div');
            colB.classList.add('col', 'form-group');

            let input = document.createElement('input');

            if (fieldName === 'qte') {
                input.type = 'number';
            } else {
                input.type = 'text';

            }
            input.classList.add('form-control');
            input.id = listNameB + rowIndexB + '.' + fieldName;
            input.setAttribute('name', listNameB + '[' + rowIndexB + '].' + fieldName);

            colB.appendChild(input);
            rowB.appendChild(colB);
        });

        document.getElementById('eventList').appendChild(rowB);

    };

    let addRowMission = function () {
        let listName = 'missionBenevoles';
        let fieldsNames = ['titre', 'description'];
        let rowIndex = document.querySelectorAll('.item').length;

        let row = document.createElement('div');
        row.classList.add('row', 'item');

        fieldsNames.forEach((fieldName) => {
            let col = document.createElement('div');
            col.classList.add('col', 'form-group');


            let input = document.createElement('input');
            input.type = 'text';
            input.classList.add('form-control');
            input.id = listName + rowIndex + '.' + fieldName;
            input.setAttribute('name', listName + '[' + rowIndex + '].' + fieldName);

            col.appendChild(input);
            row.appendChild(col);
        });

        document.getElementById('missionList').appendChild(row);
    };


    let deleteRow = function () {

    };
</script>

